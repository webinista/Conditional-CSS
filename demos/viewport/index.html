<!DOCTYPE html>
<html lang="en-us">
<head>
	<meta charset="UTF-8">
	<title>@media queries demos</title>
	<link rel="stylesheet" href="../css/s.css" media="screen">
	<style media="screen" type="text/css">
		@-o-viewport{
			width: device-width;
		}
		@-webkit-viewport{
			width: device-width;
		}
		@-ms-viewport{
			width: device-width;
		}
		@-moz-viewport{
			width: device-width;
		}
		@viewport{ 
			width: 2000;
			height: device-height;
		}

	</style>
</head>
<body>
	<header></header>
	<nav></nav>
	<article></article>
	<aside></aside>
	<footer></footer>

<script type="text/javascript">

var viewport = document.styleSheets[1].ownerNode.innerHTML;
var match = viewport.match(/@viewport\{[^]*\}/m)[0];

console.log(match);

if( hasViewport = !!window.CSSRule.VIEWPORT_RULE ){
	// create a new rule for each prefix.
	// console.log( match.replace(/(@)(viewport)/,"$1-o-$2") );

} else {
	var props = match.replace('@viewport','').replace('{','').replace('}',''),
	items = props.split(';'),
	mtc = [], meta, split, content, ct;
	
	items.map( function(i){
		// Would it be faster to just 
		var it = i.replace(/\s/g,'').split(':').join('=');
		mtc.push(it);
	});
		
	content = mtc.join(',');   // turn it into a string.
	split = content.split(''); // turn the string into an array
	
	Array.prototype.pop.call( split, -1 ); // trim the comma from the end.
	
	meta = document.createElement('meta');
	meta.setAttribute('name','viewport');
	meta.setAttribute('content', split.join('') ); 
	
	// Inserts after the first child element.
	document.head.insertBefore( meta, document.head.firstElementChild.nextElementSibling );
}

// console.log( document.styleSheets[1].ownerNode );

</script>
</body>
</html>

